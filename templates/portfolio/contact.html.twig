{% extends 'base.html.twig' %}

{% block body %}
  <section class="section">
    <div class="container-shell">
      <div class="section-subtitle">{{ 'nav.contact'|trans }}</div>
      <h1 class="section-title">{{ 'section.contact'|trans }}</h1>

      <div class="mt-8 grid gap-6 lg:grid-cols-[1.15fr,1fr]">
        <div class="card" data-reveal>
          {% if contactInfo %}
            <div class="flex flex-wrap items-start gap-4">
              {% if contactInfo.photoPath %}
                <img class="profile-photo" src="{{ asset('uploads/profile/' ~ contactInfo.photoPath) }}" alt="{{ contactInfo.displayName }}">
              {% else %}
                <div class="profile-photo flex items-center justify-center text-lg font-black tracking-[0.2em] text-slate-500">IT</div>
              {% endif %}
              <div class="flex-1">
                <h2 class="text-3xl text-ink">{{ contactInfo.displayName }}</h2>
                <p class="mt-2 text-sm text-muted">{{ localized(contactInfo, 'summary', app.request.locale) }}</p>
              </div>
            </div>

            <div class="mt-6 grid gap-3 text-sm text-slate-700">
              <div class="social-chip">{{ contactInfo.email }}</div>
              {% if localized(contactInfo, 'location', app.request.locale) %}
                <div class="social-chip">{{ localized(contactInfo, 'location', app.request.locale) }}</div>
              {% endif %}
            </div>

            <div class="mt-6 flex flex-wrap gap-2">
              {% if contactInfo.linkedinUrl %}
                <a class="social-chip" href="{{ contactInfo.linkedinUrl }}" target="_blank" rel="noopener">
                  <svg class="h-3.5 w-3.5" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                    <path d="M6.94 8.58A1.56 1.56 0 1 1 6.94 5.46a1.56 1.56 0 0 1 0 3.12ZM5.62 18.54h2.64V9.9H5.62v8.64Zm4.45-8.64h2.54v1.18h.04c.35-.67 1.22-1.37 2.52-1.37 2.7 0 3.2 1.78 3.2 4.08v4.75h-2.64v-4.21c0-1-.02-2.29-1.39-2.29-1.4 0-1.62 1.09-1.62 2.22v4.28h-2.65V9.9Z"/>
                  </svg>
                  <span>LinkedIn</span>
                </a>
              {% endif %}
              {% if contactInfo.githubUrl %}
                <a class="social-chip" href="{{ contactInfo.githubUrl }}" target="_blank" rel="noopener">
                  <svg class="h-3.5 w-3.5" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                    <path d="M12 .5C5.65.5.5 5.78.5 12.29c0 5.21 3.3 9.62 7.89 11.18.58.11.79-.26.79-.57 0-.28-.01-1.03-.02-2.02-3.21.71-3.89-1.58-3.89-1.58-.53-1.38-1.3-1.74-1.3-1.74-1.06-.75.08-.74.08-.74 1.17.08 1.79 1.24 1.79 1.24 1.04 1.83 2.73 1.3 3.4.99.1-.78.41-1.3.75-1.6-2.56-.3-5.26-1.32-5.26-5.88 0-1.3.46-2.36 1.21-3.19-.12-.3-.53-1.5.11-3.12 0 0 .99-.32 3.24 1.22a10.93 10.93 0 0 1 5.9 0c2.24-1.54 3.23-1.22 3.23-1.22.65 1.62.24 2.82.12 3.12.76.83 1.21 1.89 1.21 3.19 0 4.57-2.7 5.58-5.28 5.87.42.38.8 1.12.8 2.25 0 1.62-.02 2.93-.02 3.34 0 .32.2.7.8.57 4.58-1.57 7.88-5.98 7.88-11.18C23.5 5.78 18.35.5 12 .5Z"/>
                  </svg>
                  <span>GitHub</span>
                </a>
              {% endif %}
              {% if contactInfo.websiteUrl %}<a class="social-chip" href="{{ contactInfo.websiteUrl }}" target="_blank" rel="noopener">Website</a>{% endif %}
            </div>
          {% endif %}
        </div>

        <div class="card" data-reveal>
          {{ form_start(form, {attr: {class: 'space-y-4'}}) }}
            {{ form_errors(form) }}
            {{ form_row(form.name, {label: 'form.name'|trans}) }}
            {{ form_row(form.email, {label: 'form.email'|trans}) }}
            {{ form_row(form.subject, {label: 'form.subject'|trans}) }}
            {{ form_row(form.message, {label: 'form.message'|trans}) }}

            {% if recaptcha_enabled %}
              <div class="space-y-2">
                <label class="text-sm font-semibold text-slate-700">{{ 'form.captcha'|trans }}</label>
                <div class="recaptcha-shell">
                  <div class="g-recaptcha" data-sitekey="{{ recaptcha_site_key }}"></div>
                </div>
              </div>
            {% endif %}
            <button class="button-primary w-full" type="submit">{{ 'form.send'|trans }}</button>
          {{ form_end(form) }}
        </div>
      </div>
    </div>
  </section>
{% endblock %}

{% block javascripts %}
  {{ parent() }}
  {% if recaptcha_enabled %}
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
  {% endif %}
{% endblock %}
